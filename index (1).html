<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Ropa 2025</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="hero">
        <div class="hero-content">
            <h1>NUEVA COLECCIÓN 2025</h1>
            <p>Estilo y comodidad en cada prenda.</p>
            <a href="#abrigo" class="cta-button">Ver Catálogo</a>
        </div>
    </header>

    <nav class="navbar">
        <div class="nav-container">
            <a href="#" class="nav-logo" onclick="filterCategories('ALL')">Todo </a>

            <button class="hamburger" id="hamburger-btn">
                ☰
            </button>

            <div class="nav-links" id="nav-links">
                <button class="close-btn" id="close-btn">×</button>
                
                <a href="#abrigo" onclick="filterCategories('abrigo'); closeMenu();">Suéteres y Chamarras</a>
                <a href="#superiores" onclick="filterCategories('superiores'); closeMenu();">Playeras y Camisas</a>
                <a href="#inferiores" onclick="filterCategories('inferiores'); closeMenu();">Pantalones y Shorts</a>
            </div>
        </div>
    </nav>
    
    <div class="filter-bar">
        <button onclick="filterProducts(this, 'ALL')" class="active">Mostrar Todo</button>
        <button onclick="filterProducts(this, 'S')">Talla S</button>
        <button onclick="filterProducts(this, 'M')">Talla M</button>
        <button onclick="filterProducts(this, 'L')">Talla L</button>
        <button onclick="filterProducts(this, 'XL')">Talla XL</button>
    </div>

    <main>
        
        <section id="abrigo" class="category">
            <h2>Suéteres y Chamarras</h2>
            <div class="product-grid" id="container-abrigo">
                </div>
        </section>

        <section id="superiores" class="category">
            <h2>Playeras y Camisas</h2>
            <div class="product-grid" id="container-superiores">
            </div>
        </section>

        <section id="inferiores" class="category">
            <h2>Pantalones y Shorts</h2>
            <div class="product-grid" id="container-inferiores">
            </div>
        </section>

    </main>

    <footer>
        <p>© Catalogo 2025 </p>
    </footer>

    <script>
        const hamburger = document.getElementById('hamburger-btn');
        const navLinks = document.getElementById('nav-links');
        const closeBtn = document.getElementById('close-btn');

        hamburger.addEventListener('click', () => {
            navLinks.classList.add('active');
        });

        closeBtn.addEventListener('click', () => {
            navLinks.classList.remove('active');
        });

        function closeMenu() {
            navLinks.classList.remove('active');
        }
    </script>
    
    <script>
        function filterCategories(selectedId) {
            const allCategories = document.querySelectorAll('.category');
            const filterBar = document.querySelector('.filter-bar');
            
            if (selectedId === 'ALL') {
                allCategories.forEach(section => {
                    section.style.display = 'block'; 
                });
                filterBar.style.display = 'block'; 
                
                const allButton = document.querySelector('.filter-bar button[onclick*="\'ALL\'"]');
                filterProducts(allButton, 'ALL');
                return; 
            }
            
            allCategories.forEach(section => {
                section.style.display = 'none';
            });
            
            if (selectedId) {
                const selectedSection = document.getElementById(selectedId);
                if (selectedSection) {
                    selectedSection.style.display = 'block';
                    selectedSection.scrollIntoView({ behavior: 'smooth' });
                }
            }
            
            const allButton = document.querySelector('.filter-bar button[onclick*="\'ALL\'"]');
            filterProducts(allButton, 'ALL');
        }
    </script>
    
    <script>
        function filterProducts(clickedButton, selectedSize) {
            // Nota: ahora busca .product-link dinámicamente porque se crean después
            const productLinks = document.querySelectorAll('.product-link');
            const filterButtons = document.querySelectorAll('.filter-bar button');

            filterButtons.forEach(btn => btn.classList.remove('active'));
            if(clickedButton) {
                 clickedButton.classList.add('active');
            } else {
                 document.querySelector('.filter-bar button[onclick*="\'ALL\'"]').classList.add('active');
            }

            productLinks.forEach(link => {
                const availableSizes = link.getAttribute('data-sizes');
                
                if (selectedSize === 'ALL' || !availableSizes) {
                    link.classList.remove('hidden');
                    return;
                }

                if (availableSizes.includes(selectedSize)) {
                    link.classList.remove('hidden'); 
                } else {
                    link.classList.add('hidden'); 
                }
            });
        }
    </script>

    <script src="productos.js"></script>

    <script>
        function cargarCatalogo() {
            // Diccionario para relacionar categorías con IDs del HTML
            const contenedores = {
                'abrigo': document.getElementById('container-abrigo'),
                'superiores': document.getElementById('container-superiores'),
                'inferiores': document.getElementById('container-inferiores')
            };

            // Iteramos sobre el archivo productos.js
            if (typeof productos !== 'undefined') {
                productos.forEach(prod => {
                    const container = contenedores[prod.categoria];
                    
                    // Si existe el contenedor para esa categoría, creamos la tarjeta
                    if (container) {
                        const htmlTarjeta = `
                            <a href="producto.html?id=${prod.id}" class="product-link" data-sizes="${prod.tallas.join(' ')}">
                                <div class="product-card">
                                    <img src="${prod.imagenPrincipal}" alt="${prod.nombre}">
                                    <h3>${prod.nombre}</h3>
                                    <p class="sizes">Tallas: ${prod.tallas.join(', ')}</p>
                                    <p class="price">$${prod.precio.toFixed(2)} MXN</p>
                                </div>
                            </a>
                        `;
                        container.innerHTML += htmlTarjeta;
                    }
                });
            } else {
                console.error("No se encontró la variable 'productos'. Asegúrate de haber creado el archivo productos.js");
            }
        }

        // Ejecutar todo cuando la página termine de cargar
        document.addEventListener('DOMContentLoaded', () => {
            cargarCatalogo(); // 1. Crea las tarjetas
            filterCategories('ALL'); // 2. Inicializa los filtros
        });
    </script>
</body>
</html>
